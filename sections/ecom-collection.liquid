<div class="ecom-collection-wrapper">
  <div class="page-width">
    <div class="ecom-collection-heading">
      <h2>{{ section.settings.heading }}</h2>
    </div>
    <div class="ecom-collection-grid">
      {% for block in section.blocks %}
        {% assign product = block.settings.product %}
        {% assign variant_images = product.images | where: 'attached_to_variant?', true | map: 'src' %}
        
            <div class="ecom-collection-grid-item">
               {% render 'product-media-gallery', product: product, variant_images: variant_images, limit: 1 %}
              <h3>{{ product.title }}</h3>
            </div>
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Ecom Collection",
  "settings": [
        {
        "type": "text",
        "id": "heading",
        "label": "Heading"
      }
  ],
  "blocks": [
  {
    "type": "product",
    "name": "Product",
    "settings": [
      {
        "type": "product",
        "id": "product",
        "label": "Select Product"
      }
    ]
  }
  ],
  "presets": [
    {
      "name": "Ecom Collection"
    }
  ]
}
{% endschema %}
